# localization 定位工作
## 2.JAN.2024
### 1.GNSS工作原理

全球卫星导航系统（GNSS），如全球定位系统（GPS），是一种基于卫星的导航系统，它可以在全球范围内提供地理位置和时间信息。GNSS的工作原理主要基于以下几个关键要素：

#### 卫星组成
- GNSS由一组轨道卫星组成，这些卫星围绕地球运行，并持续广播包含其位置和当前时间的信号。

#### 信号传输
- 卫星发出的信号是一种复杂的电磁波，其中包含卫星的身份信息、位置（星历），以及信号发送的准确时间。

#### 地面接收器
- GNSS接收器（如智能手机或专用GPS设备）接收来自多个卫星的信号，用于计算接收器的地理位置和时间。

#### 距离测量
- 接收器通过测量信号从卫星到达接收器所需的时间来计算与每个卫星的距离。由于信号以光速传播，因此通过计算传播时间与光速的乘积，可以得出距离。

#### 三角定位（Trilateration）
- 通过至少四颗卫星的信号，接收器可以确定其在三维空间中的位置。接收器到每个卫星的距离定义了以卫星为中心的一个球体，这些球体的交点即是接收器的位置。至少需要四颗卫星是因为需要额外的一颗卫星来校正时钟误差。

#### 时钟误差校正
- GNSS接收器的内置时钟与卫星的原子钟相比精度较低。通过使用额外的卫星信号，接收器可以计算并校正自身时钟的误差。

#### 大气延迟校正
- 卫星信号在穿过大气层时会减速，导致延迟。GNSS系统通过建模或使用额外的补偿信息来校正这种延迟。

综上所述，GNSS的定位原理基于从卫星到接收器的信号传播时间测量，结合三角定位技术计算出接收器的精确位置。这种系统能够在全球范围内提供定位服务，广泛应用于导航、测绘、农业、海洋和航空等众多领域。

### 2.ROS中GNSS消息类型
在 ROS（Robot Operating System）中处理 GNSS 数据时，通常使用特定的消息类型来封装这些数据。GNSS 数据可能包括位置、速度、方向、时间戳等信息。ROS 提供了几种标准消息类型来处理这类数据，以及允许用户根据需要自定义消息类型。
#### 标准消息类型
- sensor_msgs/NavSatFix:

    这是最常用的消息类型，用于发布 GNSS 定位数据。
    包含经度、纬度、海拔高度以及位置的协方差信息。
    通常用于 GPS 和其他 GNSS 接收器的位置数据。

- sensor_msgs/NavSatStatus:
    提供关于 GNSS 状态的信息，如服务状态和卫星使用情况。
    可以与 NavSatFix 消息一起使用，提供更详细的定位信息。
  
![navsat](https://img-blog.csdnimg.cn/9386c260c42b4549be742bb1381dd8dd.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5a2m5peg5q2i5aKD55qE5bCP6b6f,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center)
